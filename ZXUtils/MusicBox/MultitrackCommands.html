<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module ZXUtils::MusicBox::MultitrackCommands - ruby-Z80</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="TrackConfigCommands.html">ZXUtils::MusicBox::TrackConfigCommands</a>
  
  
  
    <li><a class="include" href="Track.html">ZXUtils::MusicBox::Track</a>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-channel_name_to_index">::channel_name_to_index</a>
    
    <li ><a href="#method-i-all_ch">#all_ch</a>
    
    <li ><a href="#method-i-all_channels">#all_channels</a>
    
    <li ><a href="#method-i-ch_a">#ch_a</a>
    
    <li ><a href="#method-i-ch_b">#ch_b</a>
    
    <li ><a href="#method-i-ch_c">#ch_c</a>
    
    <li ><a href="#method-i-channel">#channel</a>
    
    <li ><a href="#method-i-for_ch">#for_ch</a>
    
    <li ><a href="#method-i-for_channels">#for_channels</a>
    
    <li ><a href="#method-i-loop_to">#loop_to</a>
    
    <li ><a href="#method-i-lt">#lt</a>
    
    <li ><a href="#method-i-m">#m</a>
    
    <li ><a href="#method-i-mark">#mark</a>
    
    <li ><a href="#method-i-p">#p</a>
    
    <li ><a href="#method-i-pause">#pause</a>
    
    <li ><a href="#method-i-repeat">#repeat</a>
    
    <li ><a href="#method-i-rpt">#rpt</a>
    
    <li ><a href="#method-i-sub">#sub</a>
    
    <li ><a href="#method-i-sub_track">#sub_track</a>
    
    <li ><a href="#method-i-synchronize_channels">#synchronize_channels</a>
    
    <li ><a href="#method-i-w">#w</a>
    
    <li ><a href="#method-i-wait">#wait</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-ZXUtils::MusicBox::MultitrackCommands">
  <h1 id="module-ZXUtils::MusicBox::MultitrackCommands" class="module">
    module ZXUtils::MusicBox::MultitrackCommands
  </h1>

  <section class="description">
    
<h3 id="module-ZXUtils::MusicBox::MultitrackCommands-label-MusicBox+MultitrackCommands"><a href="../MusicBox.html"><code>MusicBox</code></a> <a href="MultitrackCommands.html"><code>MultitrackCommands</code></a><span><a href="#module-ZXUtils::MusicBox::MultitrackCommands-label-MusicBox+MultitrackCommands">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Commands for multi-tracks.</p>

<p>For the other available commands see: <a href="TrackConfigCommands.html"><code>TrackConfigCommands</code></a>.</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-channel_name_to_index" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">channel_name_to_index</span><span
            class="method-args">(channel)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a channel index: 0 to 2 for the given <code>channel</code> name.</p>

<p>A <code>channel</code> can be an integer: 0 to 2 or one of the symbols or strings: <code>:a</code>, <code>:b</code>, <code>:c</code>.</p>
          
          

          
          <div class="method-source-code" id="channel_name_to_index-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 30</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">channel_name_to_index</span>(<span class="ruby-identifier">channel</span>)
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">channel</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">0</span>, <span class="ruby-string">&#39;a&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;A&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-value">:a</span>, <span class="ruby-value">:A</span> <span class="ruby-keyword">then</span> <span class="ruby-value">0</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>, <span class="ruby-string">&#39;b&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;B&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-value">:b</span>, <span class="ruby-value">:B</span> <span class="ruby-keyword">then</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">2</span>, <span class="ruby-string">&#39;c&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;C&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-value">:c</span>, <span class="ruby-value">:C</span> <span class="ruby-keyword">then</span> <span class="ruby-value">2</span>
        <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Couldn&#39;t guess which channel you&#39;ve had in mind: #{channel.inspect}&quot;</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-all_ch" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">all_ch</span><span
            class="method-args">(&amp;block)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="MultitrackCommands.html#method-i-all_channels">all_channels</a>
        </div>
        
      </div>

    
      <div id="method-i-all_channels" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            all_channels {|| ... }
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            all_ch {|| ... }
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Creates a track fragments with the same commands for all the channels.</p>

<p>Provide a block with commands suitable for <a href="Track.html"><code>MusicBox::Track</code></a>.</p>

<p>The tracks will be synchronized accordingly with the other channel&#39;s tracks.</p>
          
          

          
          <div class="method-source-code" id="all_channels-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 114</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">all_channels</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">2</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">ch</span><span class="ruby-operator">|</span> <span class="ruby-identifier">channel</span>(<span class="ruby-identifier">ch</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="MultitrackCommands.html#method-i-all_ch">all_ch</a>
        </div>
        

        
      </div>

    
      <div id="method-i-ch_a" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            ch_a {|| ... }
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Creates a track fragment for the A channel.</p>

<p>Provide a block with commands suitable for <a href="Track.html"><code>MusicBox::Track</code></a>. The track will be synchronized accordingly with the other channel&#39;s tracks.</p>
          
          

          
          <div class="method-source-code" id="ch_a-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 125</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ch_a</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        <span class="ruby-identifier">channel</span> <span class="ruby-value">0</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-ch_b" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            ch_b {|| ... }
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Creates a track fragment for the B channel.</p>

<p>Provide a block with commands suitable for <a href="Track.html"><code>MusicBox::Track</code></a>. The track will be synchronized accordingly with the other channel&#39;s tracks.</p>
          
          

          
          <div class="method-source-code" id="ch_b-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 135</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ch_b</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        <span class="ruby-identifier">channel</span> <span class="ruby-value">1</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-ch_c" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            ch_c {|| ... }
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Creates a track fragment for the C channel.</p>

<p>Provide a block with commands suitable for <a href="Track.html"><code>MusicBox::Track</code></a>. The track will be synchronized accordingly with the other channel&#39;s tracks.</p>
          
          

          
          <div class="method-source-code" id="ch_c-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 145</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ch_c</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        <span class="ruby-identifier">channel</span> <span class="ruby-value">2</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-channel" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            channel channel_name {|| ... }
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Creates a track fragment for the given <code>channel_name</code>.</p>

<p>Provide a block with commands suitable for <a href="Track.html"><code>MusicBox::Track</code></a>.</p>

<p>A <code>channel_name</code> can be an integer: 0 to 2 or one of the symbols or strings: <code>:a</code>, <code>:b</code>, <code>:c</code>.</p>

<p>The track will be synchronized accordingly with the other channel&#39;s tracks.</p>
          
          

          
          <div class="method-source-code" id="channel-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 73</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">channel</span>(<span class="ruby-identifier">ch_name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        <span class="ruby-identifier">ch_index</span> = <span class="ruby-constant">MultitrackCommands</span>.<span class="ruby-identifier">channel_name_to_index</span> <span class="ruby-identifier">ch_name</span>
        <span class="ruby-identifier">tracks</span> = <span class="ruby-keyword">if</span> (<span class="ruby-identifier">last_entry</span> = <span class="ruby-ivar">@channels</span>.<span class="ruby-identifier">last</span>) <span class="ruby-keyword">and</span> <span class="ruby-constant">TracksEntry</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">last_entry</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">last_entry</span>[<span class="ruby-identifier">ch_index</span>].<span class="ruby-identifier">nil?</span>
                <span class="ruby-identifier">last_entry</span>
        <span class="ruby-keyword">else</span>
                <span class="ruby-constant">TracksEntry</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">tap</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@channels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">t</span> }
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">first_octave_note_</span> = <span class="ruby-ivar">@first_octave_note</span>
        <span class="ruby-identifier">tempo_</span> = <span class="ruby-ivar">@tempo</span>
        <span class="ruby-identifier">tracks</span>[<span class="ruby-identifier">ch_index</span>] = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">klass</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">include</span> <span class="ruby-constant">Track</span>
                <span class="ruby-identifier">first_octave_note</span>(<span class="ruby-identifier">first_octave_note_</span>)
                <span class="ruby-identifier">tempo</span>(<span class="ruby-identifier">tempo_</span>)
                <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">module_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-for_ch" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">for_ch</span><span
            class="method-args">(*chs, &amp;block)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="MultitrackCommands.html#method-i-for_channels">for_channels</a>
        </div>
        
      </div>

    
      <div id="method-i-for_channels" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            for_channels *channel_names {|| ... }
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            for_ch *channel_names {|| ... }
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Creates a track fragments with the same commands for the channels indicated by <code>channel_names</code>.</p>

<p>Provide a block with commands suitable for <a href="Track.html"><code>MusicBox::Track</code></a>.</p>

<p>A <code>channel_names</code> can be integers: 0 to 2 or the symbols or strings: <code>:a</code>, <code>:b</code>, <code>:c</code>.</p>

<p>The tracks will be synchronized accordingly with the other channel&#39;s tracks.</p>
          
          

          
          <div class="method-source-code" id="for_channels-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 100</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">for_channels</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">chs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        <span class="ruby-identifier">chs</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">ch</span><span class="ruby-operator">|</span> <span class="ruby-constant">MultitrackCommands</span>.<span class="ruby-identifier">channel_name_to_index</span> <span class="ruby-identifier">ch</span> }.
        <span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">ch</span><span class="ruby-operator">|</span> <span class="ruby-identifier">channel</span>(<span class="ruby-identifier">ch</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="MultitrackCommands.html#method-i-for_ch">for_ch</a>
        </div>
        

        
      </div>

    
      <div id="method-i-loop_to" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            loop_to name, [repeat=nil]
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            lt name, [repeat=nil]
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Loops execution from the marked point <code>name</code>. Repeats <code>repeat</code> times. If <code>repeat</code> is <code>nil</code> or missing loops <em>forever</em>.</p>

<p>See also <a href="MultitrackCommands.html#method-i-mark"><code>MultitrackCommands.mark</code></a> and <a href="MultitrackCommands.html#method-i-repeat"><code>MultitrackCommands.repeat</code></a>. The tracks will be synchronized accordingly with the other channel&#39;s tracks.</p>
          
          

          
          <div class="method-source-code" id="loop_to-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 216</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">loop_to</span>(<span class="ruby-identifier">mark_name</span>, <span class="ruby-identifier">repeat</span>=<span class="ruby-keyword">nil</span>)
        <span class="ruby-ivar">@channels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">LoopCommand</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">mark_name</span>, <span class="ruby-identifier">repeat</span>)
        <span class="ruby-ivar">@channels</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="MultitrackCommands.html#method-i-lt">lt</a>
        </div>
        

        
      </div>

    
      <div id="method-i-lt" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">lt</span><span
            class="method-args">(mark_name, repeat=nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="MultitrackCommands.html#method-i-loop_to">loop_to</a>
        </div>
        
      </div>

    
      <div id="method-i-m" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">m</span><span
            class="method-args">(name)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="MultitrackCommands.html#method-i-mark">mark</a>
        </div>
        
      </div>

    
      <div id="method-i-mark" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            mark name
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            m name
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Marks a point in tracks and gives it a <code>name</code> as a symbol or a string. You can later use <a href="MultitrackCommands.html#method-i-loop_to"><code>MultitrackCommands.loop_to</code></a> with a marked point name. The tracks will be synchronized accordingly with the other channel&#39;s tracks.</p>
          
          

          
          <div class="method-source-code" id="mark-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 202</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mark</span>(<span class="ruby-identifier">name</span>)
        <span class="ruby-ivar">@channels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">MarkCommand</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>)
        <span class="ruby-ivar">@channels</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="MultitrackCommands.html#method-i-m">m</a>
        </div>
        

        
      </div>

    
      <div id="method-i-p" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">p</span><span
            class="method-args">(length, *length_exts)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="MultitrackCommands.html#method-i-pause">pause</a>
        </div>
        
      </div>

    
      <div id="method-i-pause" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            pause length, *additional_lengths
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            p length, *additional_lengths
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Pauses tracks execution for a <code>length</code> period. The <code>length</code> value should be a positive integer.</p>

<p>The number of <code>ticks</code> paused is being calculated based on the <a href="TrackConfigCommands.html#method-i-tempo"><code>TrackConfigCommands.tempo</code></a> value.</p>

<pre class="ruby"><span class="ruby-identifier">ticks</span> = <span class="ruby-identifier">tempo</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">length</span>
</pre>

<p>For the tempo unrelated pause see <a href="MultitrackCommands.html#method-i-wait"><code>MultitrackCommands.wait</code></a>. The tracks will be synchronized accordingly with the other channel&#39;s tracks.</p>
          
          

          
          <div class="method-source-code" id="pause-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 187</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pause</span>(<span class="ruby-identifier">length</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">length_exts</span>)
        <span class="ruby-identifier">ticks</span> = <span class="ruby-constant">Rational</span>(<span class="ruby-ivar">@tempo</span>, <span class="ruby-identifier">length</span>)
        <span class="ruby-identifier">length_exts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">len_ext</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">ticks</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">Rational</span>(<span class="ruby-ivar">@tempo</span>, <span class="ruby-identifier">len_ext</span>)
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">wait</span>(<span class="ruby-identifier">ticks</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="MultitrackCommands.html#method-i-p">p</a>
        </div>
        

        
      </div>

    
      <div id="method-i-repeat" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            repeat [repeat=nil] {|| ... }
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            rpt [repeat=nil] {|| ... }
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Repeats the execution of the commands in the given block <code>repeat</code> times. If <code>repeat</code> is <code>nil</code> or missing repeats <em>forever</em>.</p>

<p>See also <a href="MultitrackCommands.html#method-i-mark"><code>MultitrackCommands.mark</code></a> and <a href="MultitrackCommands.html#method-i-loop_to"><code>MultitrackCommands.loop_to</code></a>. The tracks will be synchronized accordingly with the other channel&#39;s tracks.</p>
          
          

          
          <div class="method-source-code" id="repeat-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 230</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">repeat</span>(<span class="ruby-identifier">times</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-value">mark:</span><span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        <span class="ruby-identifier">mark_cmd</span> = <span class="ruby-constant">MarkCommand</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">mark</span>)
        <span class="ruby-ivar">@channels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">mark_cmd</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">times</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
                <span class="ruby-keyword">yield</span>
                <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@channels</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-identifier">mark_cmd</span>) <span class="ruby-keyword">or</span> <span class="ruby-identifier">times</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
                        <span class="ruby-identifier">loop_to</span> <span class="ruby-identifier">mark_cmd</span>.<span class="ruby-identifier">mark_name</span>, <span class="ruby-identifier">times</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-ivar">@channels</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="MultitrackCommands.html#method-i-rpt">rpt</a>
        </div>
        

        
      </div>

    
      <div id="method-i-rpt" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">rpt</span><span
            class="method-args">(times=nil, mark:nil, &amp;block)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="MultitrackCommands.html#method-i-repeat">repeat</a>
        </div>
        
      </div>

    
      <div id="method-i-sub" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">sub</span><span
            class="method-args">(multitrack_name)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="MultitrackCommands.html#method-i-sub_track">sub_track</a>
        </div>
        
      </div>

    
      <div id="method-i-sub_track" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            sub_track multitrack_name
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            sub multitrack_name
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Yields execution of the tracks to another multi-track with the given <code>multitrack_name</code> as a symbol or a string. When the sub-tracks execution is finished, the yielding multi-track will resume execution. The tracks will be synchronized accordingly with the other channel&#39;s tracks.</p>
          
          

          
          <div class="method-source-code" id="sub_track-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">sub_track</span>(<span class="ruby-identifier">multitrack_name</span>)
        <span class="ruby-ivar">@channels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SubMultitrackEntry</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">multitrack_name</span>)
        <span class="ruby-ivar">@channels</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="MultitrackCommands.html#method-i-sub">sub</a>
        </div>
        

        
      </div>

    
      <div id="method-i-synchronize_channels" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            synchronize_channels a:nil, b:nil, c:nil
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Specify ranges of allowed ticks for each channel&#39;s track synchronization. If the given track is behind the most advanced track N ticks it will be synchronized only if the N matches the given range. However if the upper bound of the range is given, when exceeded a compilation error will occur.</p>

<p>If the value is <code>nil</code> the previous range, set for the channel is not being changed.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">synchronize_channels</span> <span class="ruby-value">a:</span><span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-value">10</span>, <span class="ruby-value">b:</span><span class="ruby-value">0</span><span class="ruby-operator">..</span>, <span class="ruby-value">c:</span><span class="ruby-value">5</span><span class="ruby-operator">...</span><span class="ruby-value">5</span>
</pre>

<p>The above command will allow channel A to fall behind by no more than 10 ticks and will be synchronized only if it lags 2 or more ticks behind. It will also allow channel B to fall behind by any number of ticks and will always be synchronized. It will also restrict channel C to fall behind by a maximum 4 number of ticks and will never be synchronized.</p>
<dl class="rdoc-list note-list"><dt><em>NOTE</em>
<dd>
<p>For Ruby &lt; 2.6 (where endless range was introduced) instead of 0.. use 0â€¦2**16.</p>
</dd></dl>

<p>By default a:0.., b:0.., c:0.. is set.</p>
          
          

          
          <div class="method-source-code" id="synchronize_channels-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 59</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">synchronize_channels</span>(<span class="ruby-value">a:</span><span class="ruby-keyword">nil</span>, <span class="ruby-value">b:</span><span class="ruby-keyword">nil</span>, <span class="ruby-value">c:</span><span class="ruby-keyword">nil</span>)
        <span class="ruby-ivar">@channels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SynchronizeChannelsEntry</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>, <span class="ruby-identifier">c</span>)
        <span class="ruby-ivar">@channels</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-w" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">w</span><span
            class="method-args">(ticks)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="MultitrackCommands.html#method-i-wait">wait</a>
        </div>
        
      </div>

    
      <div id="method-i-wait" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            wait ticks
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            w ticks
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Pauses tracks execution for <code>ticks</code> number of ticks. The <code>ticks</code> value should be a positive integer as an Integer or a Rational.</p>

<p>For the <a href="TrackConfigCommands.html#method-i-tempo"><code>TrackConfigCommands.tempo</code></a> related pause see <a href="MultitrackCommands.html#method-i-pause"><code>MultitrackCommands.pause</code></a>. The tracks will be synchronized accordingly with the other channel&#39;s tracks.</p>
          
          

          
          <div class="method-source-code" id="wait-source">
            <pre><span class="ruby-comment"># File lib/zxutils/music_box/multitrack.rb, line 169</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">wait</span>(<span class="ruby-identifier">ticks</span>)
        <span class="ruby-ivar">@channels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">PauseCommand</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">ticks</span>)
        <span class="ruby-ivar">@channels</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="MultitrackCommands.html#method-i-w">w</a>
        </div>
        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

