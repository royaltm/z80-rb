<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>CHANGELOG - ruby-Z80</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/navigation.js" defer></script>
<script src="./js/search.js" defer></script>
<script src="./js/search_index.js" defer></script>
<script src="./js/searcher.js" defer></script>
<script src="./js/darkfish.js" defer></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-v1.2.0.pre-2">v1.2.0.pre-2</a>
    <li><a href="#label-Z80-3A">Z80:</a>
    <li><a href="#label-ZXLib-3A">ZXLib:</a>
    <li><a href="#label-Z80Lib3D-3A">Z80Lib3D:</a>
    <li><a href="#label-v1.1.0">v1.1.0</a>
    <li><a href="#label-Z80-3A">Z80:</a>
    <li><a href="#label-ZXLib-3A">ZXLib:</a>
    <li><a href="#label-ZXUtils-3A">ZXUtils:</a>
    <li><a href="#label-Bins-3A">Bins:</a>
    <li><a href="#label-v1.0.0">v1.0.0</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="./LICENSE_md.html">LICENSE</a>
  
    <li><a href="./README_rdoc.html">README</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page CHANGELOG.md">

<h1 id="label-v1.2.0.pre-2">v1.2.0.pre-2<span><a href="#label-v1.2.0.pre-2">&para;</a> <a href="#top">&uarr;</a></span></h1>

<h2 id="label-Z80-3A">Z80:<span><a href="#label-Z80-3A">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>Added a new module <a href="Z80/Utils/CollisionField.html"><code>Z80::Utils::CollisionField</code></a>.</p>
</li><li>
<p>New macros <a href="Z80/MathInt/Macros.html#method-i-sub_from_n16"><code>Z80::MathInt::Macros#sub_from_n16</code></a> and <a href="Z80/MathInt/Macros.html#method-i-adda_to_n16"><code>Z80::MathInt::Macros#adda_to_n16</code></a>.</p>
</li><li>
<p>Added output register options to <a href="Z80/MathInt/Macros.html#method-i-adda_to"><code>Z80::MathInt::Macros#adda_to</code></a> and <a href="Z80/MathInt/Macros.html#method-i-sub_from"><code>Z80::MathInt::Macros#sub_from</code></a>.</p>
</li><li>
<p>Added output register options to <a href="Z80/MathInt/Macros.html#method-i-adda_to"><code>Z80::MathInt::Macros#adda_to</code></a> and <a href="Z80/MathInt/Macros.html#method-i-sub_from"><code>Z80::MathInt::Macros#sub_from</code></a>.</p>
</li><li>
<p><a href="Z80/Program.html#method-i-alias_label"><code>Z80::Program#alias_label</code></a> accepts :last as an address argument.</p>
</li><li>
<p>Added <a href="Z80/Program/Macros.html#method-i-rev8"><code>Z80::Program::Macros#rev8</code></a> for reversing bits in an octet.</p>
</li><li>
<p><a href="Z80.html#method-i-debug"><code>Z80#debug</code></a> method no more prints anything except printable ASCII characters.</p>
</li><li>
<p>Optimized <a href="Z80/MathInt/Macros.html#method-i-rnd"><code>Z80::MathInt::Macros#rnd</code></a> by using mul_const8_24a (size -10, time -40).</p>
</li><li>
<p>Added <a href="Z80/MathInt/Macros.html#method-i-mul_const8_24a"><code>Z80::MathInt::Macros#mul_const8_24a</code></a> as an alternative to mul_const8_24.</p>
</li><li>
<p>Added <a href="Z80/MathInt/Macros.html#method-i-mul_const_ex"><code>Z80::MathInt::Macros#mul_const_ex</code></a> as an alternative to mul_const.</p>
</li><li>
<p>Added options :sl and :zero to <a href="Z80/MathInt/Macros.html#method-i-sll8_16"><code>Z80::MathInt::Macros#sll8_16</code></a> and optimized the routine.</p>
</li><li>
<p><a href="Z80/MathInt/Macros.html#method-i-neg16"><code>Z80::MathInt::Macros#neg16</code></a> accepts a constant or nil argument allowing to sign extend 8-bit integers to a negative 16-bit.</p>
</li><li>
<p>New helper functions <a href="Z80/MathInt/Macros.html#method-i-leading_zeros"><code>Z80::MathInt::Macros#leading_zeros</code></a> and trailing_zeros.</p>
</li><li>
<p>New macro <a href="Z80/MathInt/Macros.html#method-i-mul8_24a"><code>Z80::MathInt::Macros#mul8_24a</code></a> introduce faster multiplication algorithm.</p>
</li><li>
<p>Added an :mbit9_carry option to <a href="Z80/MathInt/Macros.html#method-i-mul8_24"><code>Z80::MathInt::Macros#mul8_24</code></a>.</p>
</li><li>
<p>New method Condition#not to logically inverse a branching condition.</p>
</li><li>
<p><a href="Z80/MathInt/Macros.html#method-i-mul"><code>Z80::MathInt::Macros#mul</code></a>… macros allow some combination of arguments that wasn&#39;t possible before.</p>
</li><li>
<p>New macros <a href="Z80/MathInt/Macros.html#method-i-mul16"><code>Z80::MathInt::Macros#mul16</code></a>, mul16_signed and mul16_signed9 introduce faster multiplication algorithm  and :unroll optimization option.</p>
</li><li>
<p>Minor branching optimization of <a href="Z80/MathInt/Macros.html#method-i-divmod8"><code>Z80::MathInt::Macros#divmod8</code></a> and divmod16.</p>
</li><li>
<p>Added options :check0_far, :k_leq_m, :ignore_cf to <a href="Z80/MathInt/Macros.html#method-i-divmod"><code>Z80::MathInt::Macros#divmod</code></a>, divmod16_8 and divmod24_8.</p>
</li><li>
<p>Internally reworked and added :time_alt, :unroll, and :unroll_alt optimization options to <a href="Z80/MathInt/Macros.html#method-i-divmod"><code>Z80::MathInt::Macros#divmod</code></a>, divmod16_8, divmod24_8.</p>
</li><li>
<p>Optimized internal loop of <a href="Z80/MathInt/Macros.html#method-i-mul"><code>Z80::MathInt::Macros#mul</code></a>, mul8 and mul8_24 routines.</p>
</li><li>
<p>Added options :kbit9_carry, :tl_is_zero and :optimize to <a href="Z80/MathInt/Macros.html#method-i-mul"><code>Z80::MathInt::Macros#mul</code></a>.</p>
</li><li>
<p>Added :optimize to <a href="Z80/MathInt/Macros.html#method-i-mul_signed"><code>Z80::MathInt::Macros#mul_signed</code></a> options.</p>
</li><li>
<p>New macro <a href="Z80/MathInt/Macros.html#method-i-mul8_signed"><code>Z80::MathInt::Macros#mul8_signed</code></a>.</p>
</li><li>
<p>New macro <a href="Z80/MathInt/Macros.html#method-i-mul_signed9"><code>Z80::MathInt::Macros#mul_signed9</code></a>.</p>
</li><li>
<p>New macro <a href="Z80/MathInt/Macros.html#method-i-mul_signed9_24"><code>Z80::MathInt::Macros#mul_signed9_24</code></a>.</p>
</li><li>
<p>New macro <a href="Z80/MathInt/Macros.html#method-i-sll8_16"><code>Z80::MathInt::Macros#sll8_16</code></a>.</p>
</li><li>
<p>New macro <a href="Z80/MathInt/Macros.html#method-i-divmod16_8"><code>Z80::MathInt::Macros#divmod16_8</code></a>.</p>
</li><li>
<p>Saved 1 cycle on macro <a href="Z80/MathInt/Macros.html#method-i-mul"><code>Z80::MathInt::Macros#mul</code></a>.</p>
</li><li>
<p>New macro <a href="Z80/MathInt/Macros.html#method-i-sign_extend"><code>Z80::MathInt::Macros#sign_extend</code></a>.</p>
</li><li>
<p>New options :k_int24 and :optimize for <a href="Z80/MathInt/Macros.html#method-i-mul8_24"><code>Z80::MathInt::Macros#mul8_24</code></a>, saved 2 cycles.</p>
</li><li>
<p><a href="Z80/Utils/SinCos/Macros.html#method-i-sincos_from_angle"><code>Z80::Utils::SinCos::Macros#sincos_from_angle</code></a> enhanced arguments to support providing registers.</p>
</li></ul>

<h2 id="label-ZXLib-3A">ZXLib:<span><a href="#label-ZXLib-3A">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a href="ZXLib/Gfx/Macros.html#method-i-rctoscr"><code>ZXLib::Gfx::Macros#rctoscr</code></a> argument validation fixed.</p>
</li><li>
<p><a href="ZXLib/Gfx/Macros.html#method-i-nextrow"><code>ZXLib::Gfx::Macros#nextrow</code></a> option <code>:branch_rel</code> added.</p>
</li><li>
<p><a href="ZXLib/Sys/Macros.html#method-i-find_record"><code>ZXLib::Sys::Macros#find_record</code></a> macro improved.</p>
</li><li>
<p><a href="ZXLib/Sys/Macros.html"><code>ZXLib::Sys::Macros</code></a> no longer require <a href="ZXLib/Sys.html"><code>ZXLib::Sys</code></a> labels to be imported.</p>
</li><li>
<p>Fixed <code>subroutine</code> option in <a href="ZXLib/Gfx/Macros.html"><code>ZXLib::Gfx::Macros</code></a> and <a href="ZXLib/Gfx/Bobs/Macros.html"><code>ZXLib::Gfx::Bobs::Macros</code></a> routines using <code>sp</code> for data transfer.</p>
</li><li>
<p>New macro ZXLib::Gfx::Macros::scrmove_lines_cols.</p>
</li><li>
<p>Added <code>:copy_back</code> option to several macros in <a href="ZXLib/Gfx/Bobs/Macros.html"><code>ZXLib::Gfx::Bobs::Macros</code></a> allowing copying data back from the screen. <code>:target</code> option renamed to <code>:screen</code> while maintaining backward compatibility.</p>
</li><li>
<p>Added <a href="ZXLib/Gfx/Bobs/Macros.html#method-i-bobs_combine_pixels"><code>ZXLib::Gfx::Bobs::Macros#bobs_combine_pixels</code></a>.</p>
</li><li>
<p>A new escape sequence <code>&#39;</code> (carriage return) and handling of “r” code added to the BASIC tokenizer.</p>
</li><li>
<p>Immediate argument optimization of <a href="ZXLib/Gfx/Macros.html#method-i-copy_shadow_screen_region"><code>ZXLib::Gfx::Macros#copy_shadow_screen_region</code></a>.</p>
</li><li>
<p>Slight optimization of <a href="ZXLib/Gfx/Macros.html#method-i-clear_screen_region_fast"><code>ZXLib::Gfx::Macros#clear_screen_region_fast</code></a>.</p>
</li><li>
<p>New macro <a href="ZXLib/Gfx/Macros.html#method-i-ytoattr"><code>ZXLib::Gfx::Macros#ytoattr</code></a>.</p>
</li><li>
<p>Internal labels <code>preshift_p</code>, <code>pmask_in_e</code>, <code>px_bsh_in_ae</code> added to <a href="ZXLib/Gfx/Draw/Macros.html"><code>ZXLib::Gfx::Draw::Macros</code></a> for convenience and alternative entry points.</p>
</li><li>
<p>New routines in <a href="ZXLib/Gfx/Draw/Macros.html"><code>ZXLib::Gfx::Draw::Macros</code></a> for updating draw line functions in place.</p>
</li><li>
<p>Changed arguments of <a href="ZXLib/Sys/Macros.html#method-i-read_integer32_value"><code>ZXLib::Sys::Macros#read_integer32_value</code></a> to 4 8-bit registers instead of 2 16-bit registers, maintaining backward compatibility.</p>
</li></ul>

<h2 id="label-Z80Lib3D-3A">Z80Lib3D:<span><a href="#label-Z80Lib3D-3A">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>New library created.</p>
</li><li>
<p><a href="Z80Lib3D/Primitives.html"><code>Z80Lib3D::Primitives</code></a> struct collection added.</p>
</li><li>
<p><a href="Z80Lib3D/Quaternion.html"><code>Z80Lib3D::Quaternion</code></a> module with helper functions added.</p>
</li><li>
<p><a href="Z80Lib3D/Matrix3D.html"><code>Z80Lib3D::Matrix3D</code></a> class with macros for applying matrices added.</p>
</li><li>
<p>Float::to_fixed16_8 method defined in fixed_float.rb file.</p>
</li></ul>

<h1 id="label-v1.1.0">v1.1.0<span><a href="#label-v1.1.0">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>FIXED: <a href="Z80/Program.html#method-i-ns"><code>Z80::Program#ns</code></a> with <code>merge</code> option enabled was discarding parent label context in debug output.</p>
</li><li>
<p>More benches and tests.</p>
</li><li>
<p>Improvement: use <a href="Z80/Program.html#method-i-define_label"><code>Z80::Program#define_label</code></a> instead of <code>send</code> to define dynamic labels in several places.</p>
</li><li>
<p>Several docs improvements.</p>
</li></ul>

<h2 id="label-Z80-3A">Z80:<span><a href="#label-Z80-3A">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a href="Z80/Program.html#method-i-debug_comment"><code>Z80::Program#debug_comment</code></a> (<a href="Z80/Program.html#method-i-dc-21"><code>Z80::Program#dc!</code></a>) helper method for including user comments in debug output.</p>
</li><li>
<p><a href="Z80/Program.html#method-i-alias_label"><code>Z80::Program#alias_label</code></a> (<a href="Z80/Program.html#method-i-as"><code>Z80::Program#as</code></a>) helper for creating namespace anchored lazy label aliases (visible in debug output).</p>
</li><li>
<p><a href="Z80/Program.html#method-i-direct_label-3F"><code>Z80::Program#direct_label?</code></a> and <a href="Z80/Program.html#method-i-direct_address-3F"><code>Z80::Program#direct_address?</code></a> helpers.</p>
</li><li>
<p><a href="Z80/TAP.html"><code>Z80::TAP</code></a> FIXED - byte block larger than the length indicated in the tap header will be truncated instead of raising an error.</p>
</li><li>
<p><a href="Z80/TZX.html"><code>Z80::TZX</code></a> recognize and skip common meta chunks.</p>
</li><li>
<p><a href="Z80/MathInt/Macros.html#method-i-twos_complement16_by_sgn"><code>Z80::MathInt::Macros#twos_complement16_by_sgn</code></a> macro - <code>sgn</code> argument can be accumulator and the new option <code>t</code>.</p>
</li><li>
<p><a href="Z80/MathInt/Macros.html#method-i-utobcd"><code>Z80::MathInt::Macros#utobcd</code></a> macro features new <code>input_end</code> option.</p>
</li><li>
<p><a href="Z80/Program/Macros.html#method-i-cp16n"><code>Z80::Program::Macros#cp16n</code></a> optimized comparing with a constant number &lt; 256.</p>
</li><li>
<p>new sugar macro <a href="Z80/Program/Macros.html#method-i-cp16rr"><code>Z80::Program::Macros#cp16rr</code></a>.</p>
</li><li>
<p><a href="Z80/Program.html#method-i-select"><code>Z80::Program#select</code></a> now allows conditional blocks without any code produced and else-only conditional blocks when only label validation is needed.</p>
</li><li>
<p><a href="Z80/Utils/Sort/Macros.html"><code>Z80::Utils::Sort::Macros</code></a> producing selected sorting algorithm routines.</p>
</li></ul>

<h2 id="label-ZXLib-3A">ZXLib:<span><a href="#label-ZXLib-3A">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a href="ZXLib/Sys.html"><code>ZXLib::Sys</code></a> new labels: <code>if1vars</code> (ZX Interface 1), <code>vars128</code> (128k), <code>io_plus</code> (ULAplus), <code>memT2k.rambot</code>, more ROM routines.</p>
</li><li>
<p>new macro: <a href="ZXLib/Sys/Macros.html#method-i-move_basic_above_scld_screen_memory"><code>ZXLib::Sys::Macros#move_basic_above_scld_screen_memory</code></a> for safely accessing SCLD shadow screen from BASIC.</p>
</li><li>
<p><a href="ZXLib/Gfx/Sprite8.html"><code>ZXLib::Gfx::Sprite8</code></a> <code>CALCULATE_SCREEN_ADDRESS</code> and <code>CHECK_HEIGHT_SANITY</code> control constants; new sugar <a href="ZXLib/Gfx/Sprite8/Macros.html"><code>ZXLib::Gfx::Sprite8::Macros</code></a>; <code>maskshift</code> label exported and slightly optimized <a href="ZXLib/Gfx/Sprite8/Macros.html#method-i-gfx_sprite8_calculate_coords"><code>ZXLib::Gfx::Sprite8::Macros#gfx_sprite8_calculate_coords</code></a> macro.</p>
</li><li>
<p><a href="ZXLib/Gfx/Macros.html#method-i-clear_screen_region_fast"><code>ZXLib::Gfx::Macros#clear_screen_region_fast</code></a> macro - FIXED corner cases, now accepts odd number of columns, optimized for constant arguments, new options: <code>addr_mode</code>, <code>scraddr</code> and <code>subroutine</code>.</p>
</li><li>
<p>new macros: <a href="ZXLib/Gfx/Macros.html#method-i-clear_attrs_region_fast"><code>ZXLib::Gfx::Macros#clear_attrs_region_fast</code></a>, <a href="ZXLib/Gfx/Macros.html#method-i-copy_shadow_screen_region"><code>ZXLib::Gfx::Macros#copy_shadow_screen_region</code></a>, <a href="ZXLib/Gfx/Macros.html#method-i-copy_shadow_attrs_region"><code>ZXLib::Gfx::Macros#copy_shadow_attrs_region</code></a>, <a href="ZXLib/Gfx/Macros.html#method-i-copy_shadow_attrs_region_quick"><code>ZXLib::Gfx::Macros#copy_shadow_attrs_region_quick</code></a> and <a href="ZXLib/Gfx/Macros.html#method-i-copy_shadow_screen_region_quick"><code>ZXLib::Gfx::Macros#copy_shadow_screen_region_quick</code></a>.</p>
</li><li>
<p>Macros <a href="ZXLib/Gfx/Macros.html#method-i-nextline"><code>ZXLib::Gfx::Macros#nextline</code></a>, <a href="ZXLib/Gfx/Macros.html#method-i-prevline"><code>ZXLib::Gfx::Macros#prevline</code></a> and <a href="ZXLib/Gfx/Macros.html#method-i-ytoscr"><code>ZXLib::Gfx::Macros#ytoscr</code></a> features new <code>hires</code> option.</p>
</li><li>
<p>Macro <a href="ZXLib/Gfx/Macros.html#method-i-xytoscr"><code>ZXLib::Gfx::Macros#xytoscr</code></a> renamed to better reflecting argument order <a href="ZXLib/Gfx/Macros.html#method-i-yxtoscr"><code>ZXLib::Gfx::Macros#yxtoscr</code></a> and aliased as old name for backward compatibility.</p>
</li><li>
<p>New <a href="ZXLib/Gfx/Bobs/Macros.html"><code>ZXLib::Gfx::Bobs::Macros</code></a> for drawing and manipulating bitmap objects.</p>
</li><li>
<p><a href="ZXLib/Basic.html"><code>ZXLib::Basic</code></a> recognizes SE BASIC instructions when parsing source, and <a href="ZXLib/Basic/Program.html#method-i-to_source"><code>ZXLib::Basic::Program#to_source</code></a> can list SE BASIC tokens with <code>se</code> option enabled.</p>
</li></ul>

<h2 id="label-ZXUtils-3A">ZXUtils:<span><a href="#label-ZXUtils-3A">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a href="ZXUtils/Gallery.html"><code>ZXUtils::Gallery</code></a> displays various ZX Spectrum screen formats, including SCLD, ULAplus (also HAM256) modes.</p>
</li><li>
<p><a href="ZXUtils/BigFont/Macros.html"><code>ZXUtils::BigFont::Macros</code></a> features high resolution mode; <a href="ZXUtils/BigFontHires.html"><code>ZXUtils::BigFontHires</code></a> program.</p>
</li></ul>

<h2 id="label-Bins-3A">Bins:<span><a href="#label-Bins-3A">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><code>zxgallery</code>: creates <a href="ZXUtils/Gallery.html"><code>ZXUtils::Gallery</code></a> <code>.tap</code> file from provided <code>.scr</code> files.</p>
</li><li>
<p><code>zxconv</code>: v0.5 - saves hi-res and hi-color screens in a proper ULAplus extended <code>SCR</code> format.</p>
</li><li>
<p><code>zxrun</code>: v0.2 <code>ZXEMU_PATH</code> OS environment variable overrides emulator program; arguments passed to the emulator after <code>--</code>.</p>
</li><li>
<p><code>zxinit</code>: v0.3 program template now includes all zxlib modules.</p>
</li></ul>

<h1 id="label-v1.0.0">v1.0.0<span><a href="#label-v1.0.0">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>Initial release.</p>
</li></ul>

</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

